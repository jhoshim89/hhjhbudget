# 가계부 대시보드 상세 요구사항

## 프로젝트 개요
부부(재호 & 향화)가 함께 사용하는 가계부 대시보드. React + Recharts + Tailwind CSS 기반. Google Sheets 연동 예정.

---

## 탭 구조 (순서대로)

| 순서 | 탭 이름 | 용도 |
|------|---------|------|
| 1 | 📊 총괄 | 메인 대시보드 - 전체 요약 조회 |
| 2 | 📋 현황 | 수입/지출/자산 상세 조회 |
| 3 | 📈 투자 | 주식/채권 관리 |
| 4 | 📅 연간 | 연간 요약 |
| 5 | ✏️ 입력 | 향화/재호 데이터 입력 (분리) |

---

## ✏️ 입력 탭 상세

### 좌우 분리 레이아웃
- **왼쪽 (핑크 테마)**: 👩 향화 입력
- **오른쪽 (블루 테마)**: 👨 재호 입력

### 👩 향화 입력 (2개만)
1. **향화 카카오 평가액** - 원화 직접 입력
2. **향화 잔고 (신한)** - 원화

> ✨ 향화 영웅문은 종목관리로 자동 계산되므로 입력 불필요

### 👨 재호 입력 (나머지 전부)

#### 💰 수입
- **고정수입**: 월급, 연구비, 월세 (각각 금액 입력)
- **변동수입**: 드롭다운으로 종류 선택 (강의비, 배당, 기타) + 금액 + 메모

#### 💸 지출
- **카드값**: 맨 위 고정, 빨간 하이라이트
- **고정지출**: 접기/펼치기 가능, 체크박스로 선택/해제
  - 대출 상환 (1,410,000)
  - 관리비 (250,000)
  - 가스비 (100,000)
  - 인터넷 (17,000)
  - 구독료 (16,000)
  - 주유비 (150,000)
  - 애들 보험/화재보험 (40,000)
  - 재호 메리츠실비 (12,000)
  - 향화 삼성실비 (17,000)
  - 치과보험 (50,000)
  - 향화 용돈 (100,000)
  - 향화 운동 (120,000)
- **변동지출**: 항목 추가/삭제 가능 (관리비, 주유비, 기타 등)

#### 🏦 자산 & 행위
- 재호 잔고 (카뱅)
- 적금
- 재호 영웅문 평가액 (원화)
- 저축한 금액 (거의 고정 12만원)
- 투자한 금액 (있는 달만)

#### 🏷️ 큰 지출 메모
- 항목명 + 금액 입력
- 해당 월에만 표시

---

## 📋 현황 탭 상세

### 상단 요약 카드 (4개)
- 총 수입 / 총 지출 / 순수익 / 저축률

### 3컬럼 레이아웃

#### 💰 수입 컬럼
- 고정수입 목록 + 소계
- 변동수입 목록 + 소계
- **총 수입**

#### 💸 지출 컬럼
- 💳 카드값 (빨간 하이라이트)
- 고정지출 목록 (스크롤) + 소계
- 변동지출 목록
- 큰 지출 메모 (있으면)
- **총 지출**

#### 🏦 자산 컬럼
- 잔고: 재호(카뱅), 향화(신한), 적금 → 현금 합계
- 주식: 향화영웅문, 향화카카오, 재호영웅문 → 주식 합계
- 채권
- **총 자산**
- 이달 행위: 저축/투자 금액

---

## 📈 투자 탭 상세

### 상단 컨트롤
- 월 선택 (← 이전/다음 →)
- 환율 입력 (기본 1380) + 🔄 자동 조회 버튼
- 🔄 전체 업데이트 버튼 (주가 + 환율 동시 조회)

### 상단 요약 카드 (5개)
- 총 평가액 (USD)
- 총 평가액 (KRW)
- 채권
- 총 자산
- 투자 원금

### 벤치마크 비교
- SPY (S&P 500 ETF) 현재가
- QQQ (NASDAQ 100 ETF) 현재가
- TQQQ (NASDAQ 100 3x 레버리지) 현재가

### 포트폴리오 시각화 (2개 차트)
1. **🥧 종목별 비중** - 파이차트
2. **📊 종목별 평가액** - 가로 바차트

### 계좌별 현황 (3컬럼)

#### 💼 향화 영웅문 (좌측 2컬럼 차지)
- **종목 관리 방식** (장투)
- 테이블 컬럼: 종목 | 수량 | 현재가 | 평가액($) | 평가액(₩) | 매입가 | 수익률
- **정렬 기능**: 헤더 클릭 시 정렬 (종목명, 수량, 평가액, 수익률)
- 종목 추가/삭제 가능
- 기본 종목: NVDA(엔비디아), GOOGL(구글), MSFT(마이크로소프트), CPNG(쿠팡), AMZN(아마존), TSLA(테슬라)

#### 📱 평가액 직접 입력 (우측 1컬럼)
- 향화 카카오: **원화** 입력 → 달러 환산 표시
- 재호 영웅문: **원화** 입력 → 달러 환산 표시
- 직접입력 합계

### 전체 합계 바
- 향화 영웅문 / 향화 카카오 / 재호 영웅문 / 🎯 주식 총합
- 메인은 원화, 서브로 달러 표시

### 하단 영역 (2컬럼)

#### 📈 평가액 vs 원금 차트
- Area Chart (평가액 파랑, 원금 주황)

#### 📄 채권 관리
- 현재 잔액 (클릭하면 수정 가능)
- 누적 수익
- 매수/만기 입력 (만기 시 이자 입력)
- 이달 투자금 입력 → 새 원금 미리보기

### 수익금 추이 차트
- Bar Chart

---

## 📅 연간 탭 상세

### 연도 선택
- ← 이전년도 / 현재년도 / 다음년도 →
- 현재년도 이후는 비활성화

### 상단 요약 카드 (4개)
- 연간 총 수입
- 연간 총 지출
- 연간 순수익
- 평균 저축률

### 차트 (2개)
1. **월별 수입/지출 추이** - Bar Chart
2. **월별 순수익** - Bar Chart

### 분석 패널 (3개)
1. **월평균**: 수입, 지출, 순수익 평균
2. **지출 TOP 5**: 카테고리별 지출 순위
3. **수입 대비**: 지출 비율, 저축 비율 (프로그레스 바)

---

## 📊 총괄 탭 상세

### 상단 요약 카드
- 총 수입 / 총 지출 / 순자산 / 주식 자산 / 저축률

### 차트
- 수입/지출 추이 (Area Chart)
- 지출 구성 (Pie Chart)

### 월 선택 기능
- ← 이전월 / 현재월 / 다음월 →

---

## 기능 상세

### 종목명 → 티커 자동 변환
- "애플" → AAPL
- "엔비디아" → NVDA
- "테슬라" → TSLA
- "구글" → GOOGL
- "아마존" → AMZN
- "마이크로소프트" → MSFT
- "쿠팡" → CPNG
- "snp", "s&p500" → SPY
- "나스닥", "qqq" → QQQ
- "tqqq" → TQQQ
- 등등...

### 환율 자동 조회
- API: https://api.exchangerate-api.com/v4/latest/USD
- 🔄 버튼 클릭 시 실시간 조회
- "전체 업데이트" 시 주가와 함께 조회

### 주가 조회 (Yahoo Finance)
- 현재는 데모 데이터
- 실제 배포 시 Yahoo Finance API 연동 필요
- CORS 프록시 또는 백엔드 필요

### 고정지출 체크박스
- 체크 해제 시: 취소선 + 회색 처리
- "전체선택" / "전체해제" 버튼
- 합계는 체크된 항목만 계산
- 용도: "대출 상환 빼면 얼마?" 같은 시뮬레이션

### 드래그 앤 드롭
- 변동지출 항목 순서 변경
- 고정지출 항목 순서 변경

### 월 이동
- 모든 탭에서 ← → 버튼으로 월 이동
- 현재월 이후는 비활성화

---

## 데이터 구조

### 수입 (고정)
```javascript
fixedIncomes = [
  { name: '월급', amount: 0 },
  { name: '연구비', amount: 0 },
  { name: '월세', amount: 0 },
]
```

### 수입 (변동)
```javascript
variableIncomes = [
  { name: '강의비', amount: 100000, memo: '어떤 강의' },
  { name: '배당', amount: 50000, memo: 'AAPL' },
]
incomeTypes = ['강의비', '배당', '기타']
```

### 지출 (고정)
```javascript
fixedExpenses = [
  { name: '대출 상환', amount: 1410000, checked: true },
  { name: '관리비', amount: 250000, checked: true },
  // ...
]
```

### 자산
```javascript
assets = {
  재호잔고: 0,
  향화잔고: 0,
  적금: 0,
}
```

### 행위
```javascript
actions = {
  저축한금액: 120000,  // 거의 고정
  투자한금액: 0,       // 있는 달만
}
```

### 주식 (향화 영웅문 - 종목관리)
```javascript
stockList = [
  { ticker: 'NVDA', name: '엔비디아', qty: 10, avgPrice: '130' },
  { ticker: 'GOOGL', name: '구글', qty: 5, avgPrice: '' },
  // ...
]
```

### 주식 (직접 입력 - 원화)
```javascript
manualAccounts = {
  향화카카오: '5000000',  // 원화
  재호영웅문: '3000000',  // 원화
}
```

### 채권
```javascript
bondBalance = 14744359  // 현재 잔액
bondProfit = 0          // 누적 수익
```

---

## UI/UX 요구사항

### 테마
- 다크 테마 (slate 계열)
- 그라데이션 배경

### 색상
- 수입: emerald (초록)
- 지출: red (빨강)
- 자산: blue (파랑)
- 주식: violet (보라)
- 채권: amber (주황)
- 향화 섹션: pink 그라데이션
- 재호 섹션: blue 그라데이션

### 숫자 포맷
- 원화: "1,234만" 또는 "123.4만" 형식
- 달러: "$1,234" 형식
- 퍼센트: "+12.3%" 또는 "-5.2%" 형식

### 반응형
- 현재는 데스크톱 기준
- 추후 모바일 대응 필요

---

## Google Sheets 연동 (예정)

### Spreadsheet ID
`1Z5rg9BEEiZZOrgsNvJVTsdRCEH-1nMh8Mqsw86NlWcE`

### 시트 구조 (예상)
- 월별 데이터 시트
- 고정 설정 시트
- 투자 종목 시트

### 연동 방식
- Google Sheets API
- 또는 Apps Script 웹앱
- 환경변수로 API 키 관리

---

## 기술 스택

- **프레임워크**: React 18 + Vite
- **스타일**: Tailwind CSS
- **차트**: Recharts
- **배포**: Vercel (예정)
- **DB**: Google Sheets (예정)

---

## 파일 구조

```
budget-dashboard/
├── src/
│   ├── App.jsx
│   ├── Dashboard.jsx    ← 메인 컴포넌트
│   ├── index.css        ← Tailwind
│   └── main.jsx
├── index.html
├── package.json
├── tailwind.config.js
├── postcss.config.js
└── vite.config.js
```

---

## 추후 추가 기능 (논의됨)

1. **예산 vs 실제 비교** - 목표 예산 설정 후 비교
2. **순자산 추적** - 자산 - 부채
3. **대출 잔액 관리** - 상환 진행률
4. **목표 설정** - 저축 목표 달성률
5. **알림/리마인더** - 납부일 알림
6. **실시간 주가 API** - Yahoo Finance 또는 한국투자증권 API

